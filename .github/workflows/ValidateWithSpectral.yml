name: Spectral JSON Validation CI

on: [push]

env:
  REPO_BASE_PATH: https://raw.githubusercontent.com/${{github.repository}}/${GITHUB_REF##*/}
  SPECTRAL_RULESET_PATH: https://raw.githubusercontent.com/${{github.repository}}/${GITHUB_REF##*/}/.spectral.yaml
jobs:
  build:

    runs-on: ubuntu-latest

    steps:
    - name: validate JSON URL scheme
      run: |
        docker run stoplight/spectral lint {{env.REPO_BASE_PATH}}/url-schemes/exampleUrlScheme.json -r={{env.SPECTRAL_RULESET_PATH}} -v
        docker run stoplight/spectral lint {{env.REPO_BASE_PATH}}/url-schemes/healthURLScheme.json -r={{env.SPECTRAL_RULESET_PATH}} -v
